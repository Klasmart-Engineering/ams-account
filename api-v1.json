{
    "openapi": "3.0.2",
    "info": {
        "title": "Accounts API",
        "version": "1.0",
        "description": "The accounts management RESTful API service."
    },
    "servers": [
        {
            "url": "https://{region}.api.badanamu.net/v1",
            "description": "The production API server.",
            "variables": {
                "region": {
                    "default": "seoul",
                    "description": "The server region.",
                    "enum": [
                        "seoul",
                        "mumbai"
                    ]
                }
            }
        },
        {
            "url": "https://{region}-test.api.badanamu.net/v1",
            "description": "The test production API server.",
            "variables": {
                "region": {
                    "default": "seoul",
                    "description": "The server region.",
                    "enum": [
                        "seoul",
                        "mumbai"
                    ]
                }
            }
        },
        {
            "url": "https://{region}-beta.api.badanamu.net/v1",
            "description": "The beta staging API server.",
            "variables": {
                "region": {
                    "default": "seoul",
                    "description": "The server region.",
                    "enum": [
                        "seoul",
                        "mumbai"
                    ]
                }
            }
        },
        {
            "url": "https://api.internal.badanamu.net/v1",
            "description": "The in-house API server."
        }
    ],
    "components": {
        "schemas": {
            "APIError": {
                "description": "An API error.",
                "required": ["errCode"],
                "properties": {
                    "errCode": {
                        "type": "integer",
                        "description": "The code of the error."
                    },
                    "errName": {
                        "type": "string",
                        "description": "The name of the error."
                    },
                    "errMessage": {
                        "type": "string",
                        "description": "The error message."
                    },
                    "errField": {
                        "type": "string",
                        "description": "The name of the field that generated the error."
                    },
                    "errValue": {
                        "type": "integer",
                        "description": "Any value associated with the error."
                    },
                    "errParams": {
                        "type": "object",
                        "description": "Any parameters associated with the error."
                    }
                }
            }
        },
        "responses": {
            "400BadRequest": {
                "description": "An input query parameter, part of the URL or the request body is invalid.",
                "content": {
                    "application/json": {
                        "schema": {
                            "$ref": "#/components/schemas/APIError"
                        }
                    }
                }
            },
            "401Unauthorized": {
                "description": "You are not authorized to perform an action or to access a resource. Make sure that you are using a valid access token.",
                "content": {
                    "application/json": {
                        "schema": {
                            "$ref": "#/components/schemas/APIError"
                        }
                    }
                }
            }
        },
        "securitySchemes": {
            "bearerAuth": {
                "type": "http",
                "scheme": "bearer",
                "bearerFormat": "CIT"
            }
        }
    },
    "paths": {
        "/account/forgotpassword": {
            "post": {
                "operationId": "forgotPassword",
                "summary": "Forgot Password",
                "description": "Requests to restore a forgotten password.",
                "tags": ["account"],
                "requestBody": {
                    "description": "The forget password request information.",
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": ["user","lang"],
                                "properties": {
                                    "user": {
                                        "type": "string",
                                        "format": "email",
                                        "description": "The email address.",
                                        "example": "email@example.com"
                                    },
                                    "lang": {
                                        "type": "string",
                                        "description": "The language code of the desired communication language.",
                                        "example": "en_US"
                                    },
                                    "partnerId": {
                                        "type": "integer",
                                        "format": "int32",
                                        "description": "The partner ID to use when signing up.",
                                        "example": 1,
                                        "deprecated": true
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Successfully sent instructions on how to restore the password."
                    },
                    "400": {
                        "$ref": "#/components/responses/400BadRequest"
                    },
                    "401": {
                        "$ref": "#/components/responses/401Unauthorized"
                    }
                }
            }
        },
        "/account/restorepassword": {
            "post": {
                "operationId": "restoreForgottenPassword",
                "summary": "Restore Forgotten Password",
                "description": "Restores from a forgotten password, by providing a new password.",
                "tags": ["account"],
                "requestBody": {
                    "description": "The restore password request information.",
                    "content": {
                        "application/json": {
                            "schema": {
                                "oneOf": [
                                    {
                                        "required": ["accountId","verificationCode","pw"],
                                        "properties": {
                                            "accountId": {
                                                "type": "string",
                                                "description": "The account ID.",
                                                "example": "ABC-123"
                                            },
                                            "verificationCode": {
                                                "type": "string",
                                                "description": "The verification code received by communication.",
                                                "example": "en_US"
                                            },
                                            "pw": {
                                                "type": "string",
                                                "format": "password",
                                                "description": "The new password.",
                                                "example": "password"
                                            },
                                            "partnerId": {
                                                "type": "integer",
                                                "format": "int32",
                                                "description": "The partner ID to use when signing up.",
                                                "example": 1,
                                                "deprecated": true
                                            }
                                        }
                                    },
                                    {
                                        "required": ["accountEmail","verificationCode","pw"],
                                        "properties": {
                                            "accountEmail": {
                                                "type": "string",
                                                "format": "email",
                                                "description": "The account email address.",
                                                "example": "email@example.com"
                                            },
                                            "verificationCode": {
                                                "type": "string",
                                                "description": "The verification code received by communication.",
                                                "example": "en_US"
                                            },
                                            "pw": {
                                                "type": "string",
                                                "format": "password",
                                                "description": "The new password.",
                                                "example": "password"
                                            },
                                            "partnerId": {
                                                "type": "integer",
                                                "format": "int32",
                                                "description": "The partner ID to use when signing up.",
                                                "example": 1,
                                                "deprecated": true
                                            }
                                        }
                                    }
                                ]
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Successfully restored the password."
                    },
                    "400": {
                        "$ref": "#/components/responses/400BadRequest"
                    },
                    "401": {
                        "$ref": "#/components/responses/401Unauthorized"
                    }
                }
            }
        },
        "/account/signup": {
            "post": {
                "operationId": "signUp",
                "summary": "Sign Up",
                "description": "Signs up a new Badanamu account.",
                "tags": ["account"],
                "requestBody": {
                    "description": "The sign-up request information.",
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": ["user","pw","lang"],
                                "properties": {
                                    "user": {
                                        "type": "string",
                                        "description": "The email address.",
                                        "example": "email@example.com"
                                    },
                                    "pw": {
                                        "type": "string",
                                        "format": "password",
                                        "description": "The password.",
                                        "example": "password"
                                    },
                                    "lang": {
                                        "type": "string",
                                        "description": "The language code of the desired communication language.",
                                        "example": "en_US"
                                    },
                                    "partnerId": {
                                        "type": "integer",
                                        "format": "int32",
                                        "description": "The partner ID to use when signing up.",
                                        "example": 1,
                                        "deprecated": true
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Successfully signed up.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "required": ["accountId"],
                                    "properties": {
                                        "accountId": {
                                            "type": "string",
                                            "description": "The account ID of the newly registered account.",
                                            "example": "ABC-123"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "400": {
                        "$ref": "#/components/responses/400BadRequest"
                    },
                    "401": {
                        "$ref": "#/components/responses/401Unauthorized"
                    }
                }
            }
        },
        "/account/resend/verification/email": {
            "post": {
                "operationId": "resendEmailVerification",
                "summary": "Resend Email Verification",
                "description": "Resends an email verification email.",
                "tags": ["account"],
                "requestBody": {
                    "description": "The resend email address verification request information.",
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": ["accountId"],
                                "properties": {
                                    "accountId": {
                                        "type": "string",
                                        "description": "The account ID of the account to resend the email address verification for.",
                                        "example": "ABC-123"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Successfully resent an email verification email."
                    },
                    "400": {
                        "$ref": "#/components/responses/400BadRequest"
                    },
                    "401": {
                        "$ref": "#/components/responses/401Unauthorized"
                    }
                }
            }
        },
        "/account/verify/email": {
            "post": {
                "operationId": "verifyEmail",
                "summary": "Verify Email Address",
                "description": "Verifies an email address.",
                "tags": ["account"],
                "requestBody": {
                    "description": "The verify email address request information.",
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": ["accountId","verificationCode"],
                                "properties": {
                                    "accountId": {
                                        "type": "string",
                                        "description": "The account ID of the account to verify the email address for.",
                                        "example": "ABC-123"
                                    },
                                    "verificationCode": {
                                        "type": "string",
                                        "description": "The verification code received in the email.",
                                        "example": "CODE123"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Successfully verified the email address."
                    },
                    "400": {
                        "$ref": "#/components/responses/400BadRequest"
                    },
                    "401": {
                        "$ref": "#/components/responses/401Unauthorized"
                    }
                }
            }
        },
        "/account/self/info": {
            "get": {
                "operationId": "getAccountInfoSelf",
                "summary": "Get Account Info (Self)",
                "description": "Returns the account information about the signed in user.",
                "tags": ["account"],
                "responses": {
                    "200": {
                        "description": "Successfully returned the account information.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "required": ["email", "country", "lang"],
                                    "properties": {
                                        "fullName": {
                                            "type": "string",
                                            "description": "The full name of the user.",
                                            "example": "John Doe"
                                        },
                                        "firstName": {
                                            "type": "string",
                                            "description": "The first name of the user.",
                                            "example": "John"
                                        },
                                        "lastName": {
                                            "type": "string",
                                            "description": "The last name of the user.",
                                            "example": "Doe"
                                        },
                                        "email": {
                                            "type": "string",
                                            "format": "email",
                                            "description": "The email of the user.",
                                            "example": "user@example.com"
                                        },
                                        "country": {
                                            "type": "string",
                                            "description": "The home country of the user.",
                                            "example": "US"
                                        },
                                        "lang": {
                                            "type": "string",
                                            "description": "The language code for the desired communication language of the user.",
                                            "example": "en_US"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "400": {
                        "$ref": "#/components/responses/400BadRequest"
                    },
                    "401": {
                        "$ref": "#/components/responses/401Unauthorized"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "post": {
                "operationId": "editAccountInfoSelf",
                "summary": "Edit Account Info (Self)",
                "description": "Changes account information for the signed in user.",
                "tags": ["account"],
                "requestBody": {
                    "description": "The change account information request information.",
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "lang": {
                                        "type": "string",
                                        "description": "The language code for desired communication language.",
                                        "example": "en_US"
                                    },
                                    "names": {
                                        "type": "object",
                                        "description": "The names of the account.",
                                        "properties": {
                                            "fullName": {
                                                "type": "string",
                                                "description": "The full name of the account.",
                                                "maxLength": 64
                                            },
                                            "firstName": {
                                                "type": "string",
                                                "description": "The first name of the account.",
                                                "maxLength": 32
                                            },
                                            "lastName": {
                                                "type": "string",
                                                "description": "The last name of the account.",
                                                "maxLength": 32
                                            }
                                        },
                                        "example": {
                                            "fullName": "John Doe",
                                            "firstName": "John",
                                            "lastName": "Doe"
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Successfully changed the account information."
                    },
                    "400": {
                        "$ref": "#/components/responses/400BadRequest"
                    },
                    "401": {
                        "$ref": "#/components/responses/401Unauthorized"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/account/self/password": {
            "post": {
                "operationId": "changePassword",
                "summary": "Change Password",
                "description": "Changes the password for the signed in user.",
                "tags": ["account"],
                "requestBody": {
                    "description": "The change password request information.",
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": ["currPass","newPass"],
                                "properties": {
                                    "currPass": {
                                        "type": "string",
                                        "format": "password",
                                        "description": "The current password for the account.",
                                        "example": "oldpassword"
                                    },
                                    "newPass": {
                                        "type": "string",
                                        "format": "password",
                                        "description": "The new password for the account.",
                                        "example": "newpassword"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Successfully changed the password."
                    },
                    "400": {
                        "$ref": "#/components/responses/400BadRequest"
                    },
                    "401": {
                        "$ref": "#/components/responses/401Unauthorized"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/account/self/avatar": {
            "get": {
                "operationId": "downloadAvatarSelf",
                "summary": "Download Avatar (Self)",
                "description": "Returns the avatar for the signed in user account.",
                "tags": ["account"],
                "responses": {
                    "307": {
                        "description": "Successfully returned the account avatar using a redirection."
                    },
                    "400": {
                        "$ref": "#/components/responses/400BadRequest"
                    },
                    "401": {
                        "$ref": "#/components/responses/401Unauthorized"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "post": {
                "operationId": "uploadAvatarSelf",
                "summary": "Upload Avatar (Self)",
                "description": "Uploads a new avatar for the signed in user account.",
                "tags": ["account"],
                "requestBody": {
                    "description": "The upload request information.",
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": ["contentType","contentSha256","contentLength"],
                                "properties": {
                                    "contentType": {
                                        "type": "string",
                                        "description": "The MIME-type of the avatar image.",
                                        "example": "image/jpeg"
                                    },
                                    "contentSha256": {
                                        "type": "string",
                                        "pattern": "^[0-9a-fA-F]{64}$",
                                        "description": "The hex-encoded SHA-256 hash of the avatar image.",
                                        "example": "2cf24dba5fb0a30e26e83b2ac5b9e29e1b161e5c1fa7425e73043362938b9824",
                                        "minLength": 64,
                                        "maxLength": 64
                                    },
                                    "contentLength": {
                                        "type": "integer",
                                        "format": "int64",
                                        "description": "The length of the avatar image in bytes.",
                                        "example": 17175981
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Successfully returned the upload information for the avatar.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "required": ["uploadUrl","uploadMethod"],
                                    "properties": {
                                        "uploadUrl": {
                                            "type": "string",
                                            "description": "The URL to upload to.",
                                            "example": "https://example.com/file.png?signature=ABC"
                                        },
                                        "uploadMethod": {
                                            "type": "string",
                                            "description": "The first name of the user.",
                                            "example": "POST"
                                        },
                                        "uploadHeaders": {
                                            "type": "object",
                                            "description": "The last name of the user.",
                                            "example": {
                                                "Content-Type": "image/jpeg"
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "400": {
                        "$ref": "#/components/responses/400BadRequest"
                    },
                    "401": {
                        "$ref": "#/components/responses/401Unauthorized"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "delete": {
                "operationId": "removeAvatarSelf",
                "summary": "Remove Avatar (Self)",
                "description": "Removes the current avatar for the signed in user account.",
                "tags": ["account"],
                "responses": {
                    "200": {
                        "description": "Successfully removed the current avatar."
                    },
                    "400": {
                        "$ref": "#/components/responses/400BadRequest"
                    },
                    "401": {
                        "$ref": "#/components/responses/401Unauthorized"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/account/other/{accountId}/info": {
            "get": {
                "operationId": "getAccountInfoOther",
                "summary": "Get Account Info (Other)",
                "description": "Returns the account information about a specific account.",
                "tags": ["account"],
                "parameters": [
                    {
                        "in": "path",
                        "name": "accountId",
                        "schema": {
                            "type": "string"
                        },
                        "required": true,
                        "description": "The account ID to get information about."
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successfully returned the account information.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "required": ["email"],
                                    "properties": {
                                        "fullName": {
                                            "type": "string",
                                            "description": "The full name of the user.",
                                            "example": "John Doe"
                                        },
                                        "firstName": {
                                            "type": "string",
                                            "description": "The first name of the user.",
                                            "example": "John"
                                        },
                                        "lastName": {
                                            "type": "string",
                                            "description": "The last name of the user.",
                                            "example": "Doe"
                                        },
                                        "email": {
                                            "type": "string",
                                            "format": "email",
                                            "description": "The email of the user.",
                                            "example": "user@example.com"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "400": {
                        "$ref": "#/components/responses/400BadRequest"
                    },
                    "401": {
                        "$ref": "#/components/responses/401Unauthorized"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/account/other/{accountId}/avatar": {
            "get": {
                "operationId": "downloadAvatarOther",
                "summary": "Download Avatar (Other)",
                "description": "Returns the avatar for a specific account.",
                "tags": ["account"],
                "parameters": [
                    {
                        "in": "path",
                        "name": "accountId",
                        "schema": {
                            "type": "string"
                        },
                        "required": true,
                        "description": "The account ID to get information about."
                    }
                ],
                "responses": {
                    "307": {
                        "description": "Successfully returned the account avatar using a redirection."
                    },
                    "400": {
                        "$ref": "#/components/responses/400BadRequest"
                    },
                    "401": {
                        "$ref": "#/components/responses/401Unauthorized"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        }
    }
}
